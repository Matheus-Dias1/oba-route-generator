<body>
  <!-- <app-map></app-map> -->
  <app-card
    [ngClass]="{ 'limit-height': workflow[step].limitHeight }"
    [limitSize]="workflow[step].limitWidth"
  >
    <app-home
      *ngIf="workflow[step].step === 'home'"
      (schoolsLoaded)="onSchoolsLoaded($event)"
    ></app-home>

    <app-matcher
      *ngIf="workflow[step].step === 'matcher'"
      [files]="files"
      (matchesDone)="onMatchesDone($event)"
    ></app-matcher>

    <app-route-selector
      *ngIf="workflow[step].step === 'route-selector'"
      [numSchools]="schools.length"
      (onSelect)="numRoutesPicked($event)"
    ></app-route-selector>

    <app-route-viewer
      *ngIf="workflow[step].step === 'route-viewer'"
      [schools]="schools"
      [numRoutes]="numRoutes"
      (onFinish)="onRouteReviewDone($event)"
    ></app-route-viewer>

    <app-item-picker
      [files]="files"
      (onPickItems)="onPickItems($event.selected, $event.date)"
      *ngIf="workflow[step].step === 'item-picker'"
    ></app-item-picker>

    <app-finish
      *ngIf="workflow[step].step === 'finish'"
      [routes]="routes"
      [selectedItems]="selectedItems"
      [date]="date"
      (onRestart)="onRestart()"
    ></app-finish>
  </app-card>
</body>
